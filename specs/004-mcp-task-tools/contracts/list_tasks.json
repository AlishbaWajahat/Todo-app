{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "list_tasks Tool Contract",
  "description": "MCP tool for retrieving all tasks for a user with optional filtering",
  "type": "object",
  "properties": {
    "input": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string",
          "description": "Authenticated user ID (required)",
          "minLength": 1
        },
        "completed": {
          "type": ["boolean", "null"],
          "description": "Filter by completion status (optional)",
          "default": null
        },
        "priority": {
          "type": ["string", "null"],
          "description": "Filter by priority: low, medium, high (optional)",
          "enum": ["low", "medium", "high", null],
          "default": null
        }
      },
      "required": ["user_id"],
      "additionalProperties": false
    },
    "output": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean",
          "description": "Whether the operation succeeded"
        },
        "data": {
          "type": ["object", "null"],
          "properties": {
            "tasks": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {"type": "integer"},
                  "user_id": {"type": "string"},
                  "title": {"type": "string"},
                  "description": {"type": ["string", "null"]},
                  "completed": {"type": "boolean"},
                  "priority": {"type": ["string", "null"]},
                  "due_date": {"type": ["string", "null"], "format": "date-time"},
                  "created_at": {"type": "string", "format": "date-time"},
                  "updated_at": {"type": "string", "format": "date-time"}
                },
                "required": ["id", "user_id", "title", "completed", "created_at", "updated_at"]
              }
            },
            "count": {
              "type": "integer",
              "description": "Total number of tasks returned"
            }
          },
          "required": ["tasks", "count"]
        },
        "error": {
          "type": ["string", "null"],
          "description": "Human-readable error message (present on failure)"
        },
        "error_code": {
          "type": ["string", "null"],
          "description": "Machine-readable error code (present on failure)",
          "enum": ["INVALID_USER_ID", "DATABASE_ERROR", "INTERNAL_ERROR", null]
        }
      },
      "required": ["success"]
    }
  },
  "examples": [
    {
      "input": {
        "user_id": "user123",
        "completed": null,
        "priority": null
      },
      "output": {
        "success": true,
        "data": {
          "tasks": [
            {
              "id": 1,
              "user_id": "user123",
              "title": "Buy milk",
              "description": "Get 2% milk from store",
              "completed": false,
              "priority": "medium",
              "due_date": "2026-02-10T10:00:00Z",
              "created_at": "2026-02-09T10:00:00Z",
              "updated_at": "2026-02-09T10:00:00Z"
            }
          ],
          "count": 1
        },
        "error": null,
        "error_code": null
      }
    },
    {
      "input": {
        "user_id": "",
        "completed": null,
        "priority": null
      },
      "output": {
        "success": false,
        "data": null,
        "error": "User ID is required",
        "error_code": "INVALID_USER_ID"
      }
    }
  ]
}
